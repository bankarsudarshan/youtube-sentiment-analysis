schema: '2.0'
stages:
  data_ingestion:
    cmd: python -m src.components.data_ingestion
    deps:
    - path: src/components/data_ingestion.py
      hash: md5
      md5: c6b15122dc32853a478ca2840222301d
      size: 1730
    params:
      params.yaml:
        data_ingestion.test_size: 0.3
    outs:
    - path: artifacts/data_ingestion/feature_store/raw_original.csv
      hash: md5
      md5: b73bead121d2dbfd7823b1d426695256
      size: 6888931
    - path: artifacts/data_ingestion/ingested/test.csv
      hash: md5
      md5: 3a88cf8dde372f57ac90c7904393be7a
      size: 6882940
    - path: artifacts/data_ingestion/ingested/train.csv
      hash: md5
      md5: 0e46048f3ae84c47fdf57f396dbfba66
      size: 4856679
  data_preprocessing:
    cmd: python -m src.components.data_preprocessing
    deps:
    - path: artifacts/data_ingestion/ingested/test.csv
      hash: md5
      md5: 3a88cf8dde372f57ac90c7904393be7a
      size: 6882940
    - path: artifacts/data_ingestion/ingested/train.csv
      hash: md5
      md5: 0e46048f3ae84c47fdf57f396dbfba66
      size: 4856679
    - path: src/components/data_ingestion.py
      hash: md5
      md5: c6b15122dc32853a478ca2840222301d
      size: 1730
    - path: src/components/data_preprocessing.py
      hash: md5
      md5: 5e2fcb5d16db9fc411f9cc84aaf8e457
      size: 2429
    outs:
    - path: artifacts/data_preprocessing/test_processed.csv
      hash: md5
      md5: bd526278502d29ac775eb65b286a3ba1
      size: 5098053
    - path: artifacts/data_preprocessing/train_processed.csv
      hash: md5
      md5: 0df0bf25d2563d81c2fe136c55687a52
      size: 3596107
  feature_engineering:
    cmd: python src/feature_engineering.py
    deps:
    - path: data/processed
      hash: md5
      md5: a2bbccdc23dd271231099f8d5c99ff87.dir
      size: 5098055
      nfiles: 2
    - path: src/feature_engineering.py
      hash: md5
      md5: 1030ab6a233fafb5c5a7b7357ce8481c
      size: 3695
    outs:
    - path: data/feature-engineered
      hash: md5
      md5: ffc5b0a79a3bd3266c76f50b1d859253.dir
      size: 122163204
      nfiles: 1
    - path: models/tfidf_vectorizer.pkl
      hash: md5
      md5: 577a1e4e948129cdfdfacf1196962b06
      size: 36630
  model_building:
    cmd: python src/model_building.py
    deps:
    - path: data/processed/train_processed.csv
      hash: md5
      md5: 0df0bf25d2563d81c2fe136c55687a52
      size: 3596107
    - path: src/model_building.py
      hash: md5
      md5: 98dfae3a272ad77a49c4b96fc6c4c197
      size: 4706
    params:
      params.yaml:
        model_building.learning_rate: 0.05
        model_building.max_depth: 20
        model_building.max_features: 1000
        model_building.n_estimators: 367
        model_building.ngram_range:
        - 1
        - 3
    outs:
    - path: models/lgbm_model.pkl
      hash: md5
      md5: 4f41e9d0155048a626d5726615f8b7e3
      size: 3902965
    - path: models/tfidf_vectorizer.pkl
      hash: md5
      md5: 56c2590ada06e4aa5b9b464d4b3abba3
      size: 36852
  model_evaluation:
    cmd: python -m src.components.model_evaluation
    deps:
    - path: artifacts/data_preprocessing/test_processed.csv
      hash: md5
      md5: bd526278502d29ac775eb65b286a3ba1
      size: 5098053
    - path: artifacts/data_transformation/tfidf_vectorizer.pkl
      hash: md5
      md5: 7a3a9dd9edd8a844607870660f86f800
      size: 36884
    - path: artifacts/model_trainer/output.json
      hash: md5
      md5: 35a46a02b0e010b8fdb803fc2fd070dd
      size: 52
    - path: src/components/model_evaluation.py
      hash: md5
      md5: fa10ee75b8fa24540d39a2349747757a
      size: 5673
    outs:
    - path: artifacts/model_evaluation/evaluation_result.json
      hash: md5
      md5: e341f0a67c63bd378b61ba777565368f
      size: 171
  data_transformation:
    cmd: python -m src.components.data_transformation
    deps:
    - path: artifacts/data_preprocessing/train_processed.csv
      hash: md5
      md5: 0df0bf25d2563d81c2fe136c55687a52
      size: 3596107
    - path: src/components/data_transformation.py
      hash: md5
      md5: 9094e83c30aaf51a665355103e52c4ed
      size: 1535
    params:
      params.yaml:
        data_transformation.max_features: 1000
        data_transformation.ngram_range:
        - 1
        - 3
    outs:
    - path: artifacts/data_transformation/tfidf_vectorizer.pkl
      hash: md5
      md5: 7a3a9dd9edd8a844607870660f86f800
      size: 36884
  model_trainer:
    cmd: python -m src.components.model_trainer
    deps:
    - path: artifacts/data_preprocessing/train_processed.csv
      hash: md5
      md5: 0df0bf25d2563d81c2fe136c55687a52
      size: 3596107
    - path: artifacts/data_transformation/tfidf_vectorizer.pkl
      hash: md5
      md5: 7a3a9dd9edd8a844607870660f86f800
      size: 36884
    - path: src/components/model_trainer.py
      hash: md5
      md5: def0c68951fc93fe6d7af1caf4c5f72e
      size: 2591
    params:
      params.yaml:
        model_trainer.learning_rate: 0.05
        model_trainer.max_depth: 20
        model_trainer.n_estimators: 367
    outs:
    - path: artifacts/model_trainer/trainer_output.json
      hash: md5
      md5: 0a112c30984600493c452a1e6b7614b6
      size: 52
  model_pusher:
    cmd: python -m src.components.model_pusher
    deps:
    - path: artifacts/model_evaluation/evaluation_result.json
      hash: md5
      md5: e341f0a67c63bd378b61ba777565368f
      size: 171
    - path: src/components/model_pusher.py
      hash: md5
      md5: 2f848c991016263b77160d1b88ea86b2
      size: 1775
